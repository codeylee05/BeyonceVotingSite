{% extends "core/base.html" %}

{% load static %}

{% block title %}
Vote for Album
{% endblock %}

{% block extra_head %}
<script src="{% static 'core/scripts/voting.js' %}" defer></script>
{% endblock %}


{% block content %}
<div id="alert-container" class="position-fixed top-0 start-50 translate-middle-x p-3"
    style="z-index: 1080; width: 100%; max-width: 600px;">
</div>

<div id="countdown-container" style="
    text-align:center; 
    margin:20px auto;
    font-size:1.1rem;
    font-weight:600;
    color: rgb(180, 19, 19);
    background:rgba(255, 255, 255, 0.1);
    border-radius:12px;
    padding:10px 15px;
    width:max-content;
    animation: pulseGlow 2s infinite;
    box-shadow:0 0 10px rgba(180, 19, 19, 0.3);
">
    Voting ends in
    <span id="days">0</span>d
    <span id="hours">0</span>h
    <span id="minutes">0</span>m
    <span id="seconds">0</span>s
</div>


<div class="album_voting_container">
    <h2 class="voteforalbum-header">Vote for Your Favorite Album</h2>


    <div class="vote-rules">
        <p>You can vote for any album once per day. The Voting Period is 7 days long. Come back tomorrow to build your
            voting streak. <strong>Queen's Circle Badge holders have 2 daily votes</strong><br><a
                style="text-decoration: none; font-style: italic;" href="{% url 'referral' %}">How to get the Badge?</a>
        </p>
    </div>
    <div class="album-grid-wrapper">
        <div class="album-grid">


            <div class="album-card album-card-dil"
                style="background-image: url('{% static 'core/album_covers/dil_cover.jpeg' %}');">
                <div class="album-overlay">

                    <div class="album-info">
                        <span class="album-title">Dangerously in Love</span>
                        <button class="vote-btn" data-album-id="1"
                            data-vote-url="{% url 'vote_album' 1 %}">Vote</button>
                    </div>
                </div>
            </div>


            <div class=" album-card album-card-bday"
                style="background-image: url('{% static 'core/album_covers/bday_cover.jpeg' %}');">
                <div class="album-overlay">

                    <div class="album-info">
                        <span class="album-title">B'Day</span>
                        <button class="vote-btn" data-album-id="2"
                            data-vote-url="{% url 'vote_album' 2 %}">Vote</button>
                    </div>
                </div>
            </div>


            <div class="album-card album-card-iasf"
                style="background-image: url('{% static 'core/album_covers/iasf_cover.png' %}');">
                <div class="album-overlay">
                    <div class="album-info">
                        <span class="album-title">I Am... Sasha Fierce </span>
                        <button class="vote-btn" data-album-id="3"
                            data-vote-url="{% url 'vote_album' 3 %}">Vote</button>
                    </div>
                </div>
            </div>


            <div class=" album-card album-card-4"
                style="background-image: url('{% static 'core/album_covers/4_cover.jpeg' %}');">
                <div class="album-overlay">
                    <div class="album-info">
                        <span class="album-title">4</span>
                        <button class="vote-btn" data-album-id="4"
                            data-vote-url="{% url 'vote_album' 4 %}">Vote</button>
                    </div>
                </div>
            </div>


            <div class="album-card album-card-bey"
                style="background-image: url('{% static 'core/album_covers/beyoncest_cover.jpg' %}');">
                <div class="album-overlay">

                    <div class="album-info">
                        <span class="album-title">BEYONCÉ</span>
                        <button class="vote-btn" data-album-id="5"
                            data-vote-url="{% url 'vote_album' 5 %}">Vote</button>
                    </div>
                </div>
            </div>

            <div class="album-card album-card-lem"
                style="background-image: url('{% static 'core/album_covers/lemonade_cover.png' %}');">
                <div class="album-overlay">

                    <div class="album-info">
                        <span class="album-title">Lemonade</span>
                        <button class="vote-btn" data-album-id="6"
                            data-vote-url="{% url 'vote_album' 6 %}">Vote</button>
                    </div>
                </div>
            </div>

            <div class="album-card album-card-tlg"
                style="background-image: url('{% static 'core/album_covers/tlg_cover.jpg' %}');">
                <div class="album-overlay">

                    <div class="album-info">
                        <span class="album-title">The Lion King: The Gift</span>
                        <button class="vote-btn" data-album-id="7"
                            data-vote-url="{% url 'vote_album' 7 %}">Vote</button>
                    </div>
                </div>
            </div>

            <div class="album-card album-card-ren"
                style="background-image: url('{% static 'core/album_covers/renaissance_cover.png' %}');">
                <div class="album-overlay">

                    <div class="album-info">
                        <span class="album-title">RENAISSANCE</span>
                        <button class="vote-btn" data-album-id="8"
                            data-vote-url="{% url 'vote_album' 8 %}">Vote</button>
                    </div>
                </div>
            </div>

            <div class="album-card album-card-cc"
                style="background-image: url('{% static 'core/album_covers/cowboy_carter_cover.png' %}');">
                <div class="album-overlay">

                    <div class="album-info">
                        <span class="album-title">COWBOY CARTER</span>
                        <button class="vote-btn" data-album-id="9"
                            data-vote-url="{% url 'vote_album' 9 %}">Vote</button>
                    </div>
                </div>
            </div>


        </div>
        <!--<div class="pre-vote-overlay">
            <p>Voting hasn’t started yet — come back on Oct 28, 2025!</p>
        </div>-->
    </div>



</div>


<script>
    document.addEventListener('DOMContentLoaded', () => {
        const countdownTarget = new Date("Nov 5, 2025 23:59:59").getTime();
        const daysEl = document.getElementById("days");
        const hoursEl = document.getElementById("hours");
        const minutesEl = document.getElementById("minutes");
        const secondsEl = document.getElementById("seconds");

        function updateCountdown() {
            const now = new Date().getTime();
            const distance = countdownTarget - now;

            if (distance <= 0) {
                document.getElementById("countdown-container").innerText = "Voting period has ended";
                return;
            }

            const days = Math.floor(distance / (1000 * 60 * 60 * 24));
            const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((distance % (1000 * 60)) / 1000);

            daysEl.innerText = days;
            hoursEl.innerText = hours;
            minutesEl.innerText = minutes;
            secondsEl.innerText = seconds;
        }

        updateCountdown();
        setInterval(updateCountdown, 1000);
    });
</script>



{% endblock %}